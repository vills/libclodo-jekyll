<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	
		<title>FTP сервер для CloudStorage</title>
	
	
	<meta name="keywords" content="хостинг, виртуальный сервер, vds, vps, cloud" />
	<meta name="description" content="База знаний поможет Вам в вопросах администрирования Вашего виртуального сервера VPS/VDS. База знаний содержит материалы по развертыванию широкого спектра серверных решений, от веб-серверов с базами данных до более сложных конфигураций." />
	<link rel="stylesheet" href="/pstyle.css" type="text/css" media="screen" />

	<link rel="shortcut icon" href="http://lib.clodo.ru/favicon.ico" />
	<link rel="image_src" href="http://lib.clodo.ru/favicon.ico" />

	<!--[if IE]>

		<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>

		<script type="text/javascript" src="/js/excanvas.js"></script>
		<style type="text/css">
		table.header td {
			padding:0;
		}
		.contentcolumn div.serverlist {
			width: 40%;
			margin: 15px 3% 25px 3%;
		}
		table.header td.menu table.main_menu div {
			margin-left: 2px;
		}
		</style>
	<![endif]-->
</head>

<body>


	<table cellpadding="0" cellspacing="0" border="0" width="100%">
	<tr><td height="115">
		<div class="botsi"></div>
		<div class="header"></div>
		<table cellpadding="0" cellspacing="0" width="100%" border="0" class="header">
			<tr>
				<td rowspan="2" class="logo"><a href="/"><img src="http://lib.clodo.ru/images/def_skin/logo.png" border="0" alt="Панель управления хостингом CLODO.RU" /></a></td>
				<td rowspan="2" class="slog">
					<p><nobr>База знаний Clodo.ru</nobr><br /> <font class="mslink"><a href="http://www.clodo.ru">Перейти на сайт clodo.ru</a></font></p>
				</td>
				<td class="user" align="right">
				<!--
					<form action="/search/" method="get" enctype="multipart/form-data"><font style="font-size: 14px;">Поиск по базе знаний</font> <input type="text" size="50" name="search" value=""><input type="submit" id="do" value="Искать" title="Search"></form>
				-->
				</td> 
			</tr>
			<tr>
				<td class="menu" align="right" valign="bottom">
		


					<table cellpadding="0" cellspacing="0" border="0" class="main_menu">
						<tr>
							<td><div><a href="http://panel.clodo.ru/">Панель управления</a></div></td>
							<td class="menusep">&nbsp;</td>
							<td><div><a href="http://forum.clodo.ru">Форум&nbsp;поддержки</a></div></td>
							<td class="menusep">&nbsp;</td>
							<td><div class="current"><a href="/">База знаний</a></div></td>

						</tr>
					</table>

				</td>
			</tr>
		</table>
	</td></tr>
	<tr><td valign="top">
		<div class="maincontainer">
		<table cellpadding="0" cellspacing="0" width="100%" style="padding: 0 30px;">
			<tr>
				<td valign="top" width="20%">
				<div class="balanceblock">
				<div class="cashflow">


					<!-- LEFT MENU -->
					<div class="categoryhead"><b>Разделы базы знаний</b></div>

						
							
							<div class="category1item"><a href="/clodo">Хостинг Clodo.ru</a></div>

							
						
							
							<div class="category1item"><a href="/testcategory">Тестовая категория</a></div>

							
						
							
							<div class="category1item"><a href="/cloud-storage">Облачное хранилище</a></div>

							
								<div class="category2item">
									
											<div class="category1item"><a href="/cloud-storage/backupninja-cloud.html">Создание резервной копии на Cloud Storage</a></div>
									
											<div class="category1item"><a href="/cloud-storage/cloudstorage-cyberduck.html">Cyberduck</a></div>
									
											<div class="category1item"><a href="/cloud-storage/cloudstorage.html">Облачное хранилище Clodo</a></div>
									
											<div class="category1item"><a href="/cloud-storage/subdomain_for_cloudstorage.html">Привязка поддомена к Хранилищу</a></div>
									
											<div class="category1item"><a href="/cloud-storage/ftp_to_cs.html">FTP сервер для CloudStorage</a></div>
									
								</div>
							
						
							
							<div class="category1item"><a href="/getting-started">Первые шаги</a></div>

							
						
							
							<div class="category1item"><a href="/linux">Используем Linux</a></div>

							
						
							
							<div class="category1item"><a href="/linux-security">Безопасность</a></div>

							
						
							
					</div>
					<!-- !LEFT MENU -->

				</div>
				</td>
				<td valign="top" width="80%" class="maintd">
			<div class="contentwrapper">
				<div class="contentcolumn" style="margin-left: 0;">
					<div class="innertube">

	<!-- TOP NAVIBAR _ START-->
<div class="crosh">
	<a href="/">База знаний</a> ::
	<a href="/cloud-storage">Облачное хранилище</a> :: 
	FTP сервер для CloudStorage
</div>
<!-- TOP NAVIBAR _ END-->

<h1>Установка собственного FTP-сервера для CloudStorage</h1>

<!-- ARTICLE _ START -->
<p>Управление файлами и контейнерами в Облачном хранилище можно осуществлять посредством API, различных приложений-клиентов и веб-интерфейса панели Clodo. Чтобы не устанавливать на ваш компьютер дополнительных программ, а управлять файлами в хранилище с помощью обычного FTP-клиента, можно на вашем сервере (или любом другом компьютере) установить FTP-сервер, который будет служить ретранслятором стандартных команд FTP в понятное Облачному хранилищу API.</p>

<p>В данной статье мы рассмотрим настройку подобного FTP-сервера на облачном сервере Clodo с операционной системой Debian или Ubuntu. Установка не займёт у вас много времени.</p>

<p class="tip">Внимание. Все команды, описанные в статье, выполняются от пользователя root.</p>

<p>Для начала нужно обновить базу пакетов дистрибутива и установить необходимые для работы FTP-сервера библиотеки и утилиту для работы с Git-репозиториями (так же автоматически будут установлены пакеты по зависимостям):</p>

<pre><code>apt-get update
apt-get install python-daemon python-stdeb git
</code></pre>

<p>Затем мы перейдём в каталог /tmp, чтобы лишний раз не засорять систему установочными файлами:</p>

<pre><code>cd /tmp/
</code></pre>

<p>Теперь нам нужно скачать и установить библиотеку языка Python для работы с облачным хранилищем; расширение для работы с FTP-серверами/клиентами и сам FTP-сервер. Для этого последовательно выполните следующие команды:</p>

<pre><code>git clone git://github.com/ClodoCorp/python-cloudfiles.git
cd python-cloudfiles &amp;&amp; python setup.py install &amp;&amp; cd ..

wget http://pyftpdlib.googlecode.com/files/pyftpdlib-0.7.0.tar.gz &amp;&amp; tar xf pyftpdlib-0.7.0.tar.gz
cd pyftpdlib-0.7.0 &amp;&amp; python setup.py install &amp;&amp; cd ..

git clone git://github.com/ClodoCorp/ftp-cloudfs.git
cd ftp-cloudfs &amp;&amp; python setup.py install &amp;&amp; cd ..
</code></pre>

<p>Если все вышеуказанные команды у вас выполнились без ошибок, значит установка FTP-сервера для работы с Облачным хранилищем закончена и вы можете удалить скачанные исходные файлы.</p>

<p>Теперь нам необходимо запустить его. Делается это с помощью команды:</p>

<pre><code>ftpcloudfs -b 62.76.1.1 -p 2021 -a http://api.clodo.ru -l /var/log/ftpcloudfs.log \
	--workers=4 --pid-file=/var/run/ftpcloudfs.pid
</code></pre>

<p>А сейчас давайте рассмотрим список опций, которые мы указали при старте сервера:</p>

<blockquote>

  <table>
    <tbody>
      <tr>
        <td><strong>-b 62.76.1.1</strong></td>
        <td>указывает IP-адрес, который будет прослушивать сервер</td>
      </tr>
      <tr>
        <td><strong>-p 2021</strong></td>
        <td>указывает порт, прослушиваемый сервером (при подключении в FTP-клиенте нужнщо указывать именно его)</td>
      </tr>
      <tr>
        <td><strong>-a http://api.clodo.ru</strong></td>
        <td>адрес API, для управления Облачными хранилищами</td>
      </tr>
      <tr>
        <td><strong>-l /var/log/ftpcloudfs.log</strong></td>
        <td>путь к лог-файлу FTP-сервера</td>
      </tr>
      <tr>
        <td><strong>–workers=4</strong></td>
        <td>количество рабочих процессов FTP-сервера (этот параметр можно опустить)</td>
      </tr>
      <tr>
        <td><strong>–pid-file=/var/run/ftpcloudfs.pid</strong></td>
        <td>указывает путь к файлу, в котором будет записан номер главного процесса FTP-сервера. Нам он понадобится для выключения FTP-сервера</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<p>Вот и всё, вы настроили FTP-сервер для работы с Облачным хранилищем. Теперь вы можете подключиться к нему и управлять файлами и контейнерами в любом вашем Облачном хранилище.</p>

<p>Для подключения в FTP-клиенте следует указывать следующие данные:</p>

<ul>
  <li><strong>хост: 62.76.1.1</strong> (тот самый адрес, который мы указывали для прослушке при старте FTP-сервера);</li>
  <li><strong>имя пользователя: API User</strong> (узнать его можно в панели управления на вкладке “Информация” Облачного хранилища);</li>
  <li><strong>пароль: API Key</strong> (сообщается вам при создании Облачного хранилища, меняется на вкладке “Информация” в панели управления);</li>
  <li><strong>порт: 2021</strong> (порт, который вы указали при запуске сервера).</li>
</ul>

<p>Чтобы завершить работу FTP-сервера можно выполнить следующую команду:</p>

<pre><code>kill $(cat /var/run/ftpcloudfs.pid)
</code></pre>

<p>Если вы хотите, чтобы сервер автоматически запускался при включении сервера, достаточно добавить строку запуска в конец файла /etc/rc.local (при этом нужно указать полный путь к запускаемому сервису):</p>

<pre><code>/usr/local/bin/ftpcloudfs -b 62.76.1.1 -p 2021 -a http://api.clodo.ru -l /var/log/ftpcloudfs.log \
	--workers=4 --pid-file=/var/run/ftpcloudfs.pid
</code></pre>


<!-- ARTICLE _ END -->

<h6 class="usl">Условия использования документа</h6>
<p>Материал представленный на данной странице может быть использован Вами по своему усмотрению. Разрешается копирование и распространение предоставленного материала без изменения содержания и без предварительного уведомления администрации <a class='out' target='_blank' href="http://www.clodo.ru">Clodo.ru</a>.</p>
<p>Мы будем признательны Вам за сообщения об ошибках в представленной документации и за предложения об улучшении документации. По этим вопросам необходимо обращаться по адресу <a href="mailto:mail@clodo.ru">mail@clodo.ru</a>. При обращении не забывайте указывать URL-адрес публикации.</p>

					</div>
				</div>
			</div>

				</td>
			</tr>
		</table>
		</div>

			<div class="footer">
				Техническая поддержка: <a href="mailto:support@clodo.ru">support@clodo.ru</a> | +7 (812) 380-24-97 |  ICQ: 634804320 | Jabber: support@clodo.ru
			</div>

	</td></tr>
	</table>

</body>
</html>